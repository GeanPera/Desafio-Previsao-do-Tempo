<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Previsão do Tempo</title>
        <style>
            h1{
                margin: 0px;
            }
            form{
                text-align: center;
            }
            body{
                background-color: rgb(85, 85, 85);
            }
            section{
                border: 1px black solid;
            }
            input{
                margin-bottom: 15px;
            }
            #idTitulo{
                text-align: center;
                color: white;
            }
            #idDiaPrincipal{
                width: 390px;
                margin: auto;
                background-color: rgb(126, 126, 126);
                margin-bottom: 20px;
            }
            #idOutrosDias{
                width: 640px;
                margin: auto;
                background-color: rgb(126, 126, 126);
            }
            #idDivForm{
                margin: auto;
                width: 180px;
                margin-top: 20px;
                margin-bottom: 20px;
                color: white;
            }
            #idDivHoje{
                width: 370px;
                display: grid;
                grid-template-columns: 180px 180px ;
                grid-template-rows: auto;
                padding: 10px;
                column-gap: 10px;
                background-color: #48484842;
                color: white;
            }
            #idDivOutrosDias{
                width: 620px;
                display: grid;
                grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;
                grid-template-rows: auto;
                padding: 10px;
                column-gap: 20px;
                text-align: center;
                color: white;
            }
            #idDivTempHoje{
                grid-column: 2;
                grid-row: 1;
                display: grid;
                grid-template-columns: 70px 100px;
                column-gap: 10px;
                width: 180px;
            }
            #idDivCityDay{
                grid-column: 1;
                grid-row: 1;
                width: 180px; 
            }
            #idCidade{
                font-size: 30px;
            }
            #idTemp{
                font-size: 50px;
            } 
            #idDivDescricaoHoje{
                margin: auto;
            }
            #idTempsHoje{
                margin: auto;
            }
            .clfundoNublado{
                background-image: url("img/fundos/fundoNublado.jpg");
                background-repeat: no-repeat;
                background-size: 392px auto;
            }
            .clfundoTempoLimpo{
                background-image: url("img/fundos/fundoTempoLimpo.jpg");
                background-repeat: no-repeat;
                background-size: 392px auto;
            }
            .clfundoParcialmenteNublado{
                background-image: url("img/fundos/fundoParcialmenteNublado.jpg");
                background-repeat: no-repeat;
                background-size: 392px auto;
            }
            .clfundoChuva{
                background-image: url("img/fundos/fundoChuva.jpg");
                background-repeat: no-repeat;
                background-size: 392px auto;
            }
            .clNublado{    
                background-image: url("img/tempo/nublado.png");
                background-repeat: no-repeat;
                background-size: 64px 64px;
                margin: auto;
                height: 64px;
                width: 64px;
            }
            .clTempoLimpo{
                background-image: url("img/tempo/tempoLimpo.png");
                background-repeat: no-repeat;
                background-size: 64px 64px;
                margin: auto;
                height: 64px;
                width: 64px;
            }
            .clParcialmenteNublado{
                background-image: url("img/tempo/parcialmenteNublado.png");
                background-repeat: no-repeat;
                background-size: 64px 64px;
                margin: auto;
                height: 64px;
                width: 64px;
            }
            .clChuvaEsparsas{
                background-image: url("img/tempo/chuvasEspasas.png");
                background-repeat: no-repeat;
                background-size: 64px 64px;
                margin: auto;
                height: 64px;
                width: 64px;
            }
            .clChuva{
                background-image: url("img/tempo/chuva.png");
                background-repeat: no-repeat;
                background-size: 64px 64px;
                margin: auto;
                height: 64px;
                width: 64px;
            }

        </style>
    </head>
    <body>
        <div id="idTitulo">
            <h1>Previsão do Tempo</h1>
        </div>
        <div id="idDivForm">
            <form action="">
                <div>
                    <label for="idCidadeEstado">Qual sua cidade?</label>
                    <!-- Campo para informar a cidade -->
                    <input type="text" name="nmCidade" id="idCidadeEstado" placeholder=" Sua cidade....">
                </div>
                <div>
                    <!-- Botão para enviar a cidade -->
                    <input type="button" id="idBtEnviar" value="Enviar">
                </div>
            </form>
        </div>
        <section id="idDiaPrincipal" hidden>
            <!-- Section dos dados do dia da pesquisa -->
            <div id="idDivHoje">
                <div id="idDivCityDay">
                    <!-- Coluna 1
                        - Nome da cidade
                        - Dia da semana e data
                        - Umidade
                        - Vento
                    -->
                    <div id="idDivCidade">
                        <!-- Cidade -->
                        <output id="idCidade"></output>
                    </div>
                    <div id="idDivDiaSemana">
                        <!-- Dia da semana e dia no mês -->
                        <output id="idDiaHoje"></output>
                    </div>
                    <div id="idDivUmidade">
                        <!-- Umidade -->
                        <output id="idUmidade"></output>
                    </div>
                    <div id="idDivVento">
                        <!-- Vento -->
                        <output id="idVento"></output>
                    </div>
                </div>
                <div id="idDivTempHoje">
                    <!-- Coluna 2
                        - Temperatura atual
                        - Temperatura minima
                        - Temperatura maxima
                        - Descrição do dia
                        - Imagem de acordo com desrição
                    -->
                    <div id="idTempsHoje">
                        <!-- Temperatura atual -->
                        <output id="idTemp"></output>
                        <!-- Temperatura max do dia -->
                        <output id="idMaxTempHoje"></output>
                        <!-- Temperatura min do dia -->
                        <output id="idMinTempHoje"></output> 
                    </div>
                    <div id="idDivDescricaoHoje">
                        <!-- Campo onde vai a imagem da descrição do dia -->
                        <div id="idDescricaoImagem">
                        </div>
                        <div>
                            <!-- Campo onde vai a descrição do dia -->
                            <output id="idDescricao"></output> 
                        </div>  
                    </div>
                </div>
            </div>
        </section>
        <section id="idOutrosDias" hidden>
            <!-- Section dos dados do dia da pesquisa -->
            <div id="idDivOutrosDias">
                <div >
                    <!-- Dia da semana -->
                    <output id="idOutDiaCol1"></output>
                    <!-- Imagem da descrição do dia -->
                    <div id="idImagemCol1"></div>
                    <div>
                        <!-- Descrição do dia -->
                        <output id="idDescricaoCol1"></output>
                    </div>
                    <!-- Temp max e min do dia -->
                    <output id="idOutTempCol1"></output>
                </div>

                <div >
                    <!-- Dia da semana -->
                    <output id="idOutDiaCol2"></output>
                    <!-- Imagem da descrição do dia -->
                    <div id="idImagemCol2"></div>
                    <div>
                        <!-- Descrição do dia -->
                        <output id="idDescricaoCol2"></output>
                    </div>
                    <!-- Temp max e min do dia -->
                    <output id="idOutTempCol2"></output>
                </div>

                <div >
                    <!-- Dia da semana -->
                    <output id="idOutDiaCol3"></output>
                    <!-- Imagem da descrição do dia -->
                    <div id="idImagemCol3"></div>
                    <div>
                        <!-- Descrição do dia -->
                        <output id="idDescricaoCol3"></output>
                    </div>
                    <!-- Temp max e min do dia -->
                    <output id="idOutTempCol3"></output>
                </div>

                <div >
                    <!-- Dia da semana -->
                    <output id="idOutDiaCol4"></output>
                    <!-- Imagem da descrição do dia -->
                    <div id="idImagemCol4"></div>
                    <div>
                        <!-- Descrição do dia -->
                        <output id="idDescricaoCol4"></output>
                    </div>
                    <!-- Temp max e min do dia -->
                    <output id="idOutTempCol4"></output>
                </div>

                <div >
                    <!-- Dia da semana -->
                    <output id="idOutDiaCol5"></output>
                    <!-- Imagem da descrição do dia -->
                    <div id="idImagemCol5"></div>
                    <div>
                        <!-- Descrição do dia -->
                        <output id="idDescricaoCol5"></output>
                    </div>
                    <!-- Temp max e min do dia -->
                    <output id="idOutTempCol5"></output>
                </div>

                <div >
                    <!-- Dia da semana -->
                    <output id="idOutDiaCol6"></output>
                    <!-- Imagem da descrição do dia -->
                    <div id="idImagemCol6"></div>
                    <div>
                        <!-- Descrição do dia -->
                        <output id="idDescricaoCol6"></output>
                    </div>
                    <!-- Temp max e min do dia -->
                    <output id="idOutTempCol6"></output>
                </div>
            </div>
        </section>
        
        <script>
            // Variaveis iniciais
            var btEnviar = document.getElementById("idBtEnviar")
            var cidade
            var previsao
            // Botão que inicia o processamento
            btEnviar.onclick = function () {
                cidade = document.getElementById("idCidadeEstado").value
                inicializacao()
            }
          
            async function inicializacao() {
                /* Function 
                    - Manda pegar a Previsão
                    - Tira o hidden das section
                    - Limpa o campo da cidade
                    - Manda definir as imagem
                    - Imprimi na tela
                */
                previsao = await pegarPrevisao()
                document.getElementById("idDiaPrincipal").hidden = false
                document.getElementById("idOutrosDias").hidden = false
                document.getElementById("idCidadeEstado").value = ""
                definirImagem()
                imprimir()
            }
            async function pegarPrevisao() {
                // Manda pegar a previsão da semana pela API
                let previsaoObj = await fetch("https://api.hgbrasil.com/weather?format=json-cors&fields=only_results,temp,city,forecast,max,min,date,description,weekday,humidity,wind_speedy,sunrise,sunset&key=51fd71ee&city_name=" + cidade)
                return previsaoObj.json()

            }    

            function definirImagem() {
                // Função para definir as imagem da descrição do dia
               
                // Definir imagem do dia atual
                // Criar o atributo "class"
                const classeHoje = document.createAttribute("class");
                // Definir a classe de acordo com a descricão do dia
                if (previsao.description == "Tempo nublado") {
                    classeHoje.value = "clNublado";
                }
                if (previsao.description == "Tempo limpo") {
                    classeHoje.value = "clTempoLimpo";
                }
                if (previsao.description == "Parcialmente nublado") {
                    classeHoje.value = "clParcialmenteNublado";
                }
                if (previsao.description == "Chuvas esparsas") {
                    classeHoje.value = "clChuvaEsparsas";
                }
                if (previsao.description == "Chuva") {
                    classeHoje.value = "clChuva";
                }
                // Aplica na div especifica de cada dia
                document.getElementById("idDescricaoImagem").setAttributeNode(classeHoje);

                // Definir imagem do fundo
                // Criar o atributo "class"
                const classeFundo = document.createAttribute("class");
                // Definir a classe de acordo com a descricão do dia
                if (previsao.description == "Tempo nublado") {
                    classeFundo.value = "clfundoNublado";
                }
                if (previsao.description == "Tempo limpo") {
                    classeFundo.value = "clfundoTempoLimpo";
                }
                if (previsao.description == "Parcialmente nublado") {
                    classeFundo.value = "clfundoParcialmenteNublado";
                }
                if (previsao.description == "Chuvas esparsas") {
                    classeFundo.value = "clfundoChuva";
                }
                if (previsao.description == "Chuva") {
                    classeFundo.value = "clfundoChuva";
                }
                // Aplica fundo na section
                document.getElementById("idDiaPrincipal").setAttributeNode(classeFundo);

                // Definir imagem de 1 dia após o dia em que foi pesquisado
                // Criar o atributo "class"
                const classeCol1 = document.createAttribute("class");
                // Definir a classe de acordo com a descricão do dia
                if (previsao.forecast[1].description == "Tempo nublado") {
                    classeCol1.value = "clNublado";
                }
                if (previsao.forecast[1].description == "Tempo limpo") {
                    classeCol1.value = "clTempoLimpo";
                }
                if (previsao.forecast[1].description == "Parcialmente nublado") {
                    classeCol1.value = "clParcialmenteNublado";
                }
                if (previsao.forecast[1].description == "Chuvas esparsas") {
                    classeCol1.value = "clChuvaEsparsas";
                }
                if (previsao.forecast[1].description == "Chuva") {
                    classeCol1.value = "clChuva";
                }
                // Aplica na div especifica de cada dia
                document.getElementById("idImagemCol1").setAttributeNode(classeCol1);

                // Definir imagem de 2 dia após o dia em que foi pesquisado
                // Criar o atributo "class"
                const classeCol2 = document.createAttribute("class");
                // Definir a classe de acordo com a descricão do dia
                if (previsao.forecast[2].description == "Tempo nublado") {
                    classeCol2.value = "clNublado";
                }
                if (previsao.forecast[2].description == "Tempo limpo") {
                    classeCol2.value = "clTempoLimpo";
                }
                if (previsao.forecast[2].description == "Parcialmente nublado") {
                    classeCol2.value = "clParcialmenteNublado";
                }
                if (previsao.forecast[2].description == "Chuvas esparsas") {
                    classeCol2.value = "clChuvaEsparsas";
                }
                if (previsao.forecast[2].description == "Chuva") {
                    classeCol2.value = "clChuva";
                }
                // Aplica na div especifica de cada dia
                document.getElementById("idImagemCol2").setAttributeNode(classeCol2);

                // Definir imagem de 3 dia após o dia em que foi pesquisado
                // Criar o atributo "class"
                const classeCol3 = document.createAttribute("class");
                // Definir a classe de acordo com a descricão do dia
                if (previsao.forecast[3].description == "Tempo nublado") {
                    classeCol3.value = "clNublado";
                }
                if (previsao.forecast[3].description == "Tempo limpo") {
                    classeCol3.value = "clTempoLimpo";
                }
                if (previsao.forecast[3].description == "Parcialmente nublado") {
                    classeCol3.value = "clParcialmenteNublado";
                }
                if (previsao.forecast[3].description == "Chuvas esparsas") {
                    classeCol3.value = "clChuvaEsparsas";
                }
                if (previsao.forecast[3].description == "Chuva") {
                    classeCol3.value = "clChuva";
                }
                // Aplica na div especifica de cada dia
                document.getElementById("idImagemCol3").setAttributeNode(classeCol3);

                // Definir imagem de 4 dia após o dia em que foi pesquisado
                // Criar o atributo "class"
                const classeCol4 = document.createAttribute("class");
                // Definir a classe de acordo com a descricão do dia
                if (previsao.forecast[4].description == "Tempo nublado") {
                    classeCol4.value = "clNublado";
                }
                if (previsao.forecast[4].description == "Tempo limpo") {
                    classeCol4.value = "clTempoLimpo";
                }
                if (previsao.forecast[4].description == "Parcialmente nublado") {
                    classeCol4.value = "clParcialmenteNublado";
                }
                if (previsao.forecast[4].description == "Chuvas esparsas") {
                    classeCol4.value = "clChuvaEsparsas";
                }
                if (previsao.forecast[4].description == "Chuva") {
                    classeCol4.value = "clChuva";
                }
                // Aplica na div especifica de cada dia
                document.getElementById("idImagemCol4").setAttributeNode(classeCol4);
                
                // Definir imagem de 5 dia após o dia em que foi pesquisado
                // Criar o atributo "class"
                const classeCol5 = document.createAttribute("class");
                // Definir a classe de acordo com a descricão do dia
                if (previsao.forecast[5].description == "Tempo nublado") {
                    classeCol5.value = "clNublado";
                }
                if (previsao.forecast[5].description == "Tempo limpo") {
                    classeCol5.value = "clTempoLimpo";
                }
                if (previsao.forecast[5].description == "Parcialmente nublado") {
                    classeCol5.value = "clParcialmenteNublado";
                }
                if (previsao.forecast[5].description == "Chuvas esparsas") {
                    classeCol5.value = "clChuvaEsparsas";
                }
                if (previsao.forecast[5].description == "Chuva") {
                    classeCol5.value = "clChuva";
                }
                // Aplica na div especifica de cada dia
                document.getElementById("idImagemCol5").setAttributeNode(classeCol5);

                // Definir imagem de 6 dia após o dia em que foi pesquisado
                // Criar o atributo "class"
                const classeCol6 = document.createAttribute("class");
                // Definir a classe de acordo com a descricão do dia
                if (previsao.forecast[6].description == "Tempo nublado") {
                    classeCol6.value = "clNublado";
                }
                if (previsao.forecast[6].description == "Tempo limpo") {
                    classeCol6.value = "clTempoLimpo";
                }
                if (previsao.forecast[6].description == "Parcialmente nublado") {
                    classeCol6.value = "clParcialmenteNublado";
                }
                if (previsao.forecast[6].description == "Chuvas esparsas") {
                    classeCol6.value = "clChuvaEsparsas";
                }
                if (previsao.forecast[6].description == "Chuva") {
                    classeCol6.value = "clChuva";
                }
                // Aplica na div especifica de cada dia
                document.getElementById("idImagemCol6").setAttributeNode(classeCol6);
            }

            function imprimir() {
                console.log(previsao)
                /* Imprimir os dados do dia atual 
                    - Cidade
                    - Dia
                    - Temperatura
                    - Vento
                    - Temperatura max
                    - Temperatura min
                    - Descrição do dia
                    - Umidade
                */
                document.getElementById("idCidade").value = previsao.city
                document.getElementById("idDiaHoje").value = previsao.forecast[0].weekday + ", " + previsao.date
                document.getElementById("idTemp").value = previsao.temp + "°"
                document.getElementById("idVento").value = "Vento: " + previsao.wind_speedy
                document.getElementById("idMaxTempHoje").value = "Max: " + previsao.forecast[0].max + "°"
                document.getElementById("idMinTempHoje").value = "Min: " + previsao.forecast[0].min + "°"
                document.getElementById("idDescricao").value = previsao.description
                document.getElementById("idUmidade").value = "Umidade: " + previsao.humidity + "%"

                // Imprimir os dias dos outros dias
                document.getElementById("idOutDiaCol1").value = previsao.forecast[1].weekday 
                document.getElementById("idOutDiaCol2").value = previsao.forecast[2].weekday 
                document.getElementById("idOutDiaCol3").value = previsao.forecast[3].weekday 
                document.getElementById("idOutDiaCol4").value = previsao.forecast[4].weekday 
                document.getElementById("idOutDiaCol5").value = previsao.forecast[5].weekday 
                document.getElementById("idOutDiaCol6").value = previsao.forecast[6].weekday 
                
                // Imprimir a descrição dos outros dias
                document.getElementById("idDescricaoCol1").value = previsao.forecast[1].description 
                document.getElementById("idDescricaoCol2").value = previsao.forecast[2].description 
                document.getElementById("idDescricaoCol3").value = previsao.forecast[3].description 
                document.getElementById("idDescricaoCol4").value = previsao.forecast[4].description 
                document.getElementById("idDescricaoCol5").value = previsao.forecast[5].description 
                document.getElementById("idDescricaoCol6").value = previsao.forecast[6].description

                // Imprimir a temperatura maxima e minima de cada dia
                document.getElementById("idOutTempCol1").value = previsao.forecast[1].max + "° - " + previsao.forecast[1].min + "°"
                document.getElementById("idOutTempCol2").value = previsao.forecast[2].max + "° - " + previsao.forecast[2].min + "°"
                document.getElementById("idOutTempCol3").value = previsao.forecast[3].max + "° - " + previsao.forecast[3].min + "°"
                document.getElementById("idOutTempCol4").value = previsao.forecast[4].max + "° - " + previsao.forecast[4].min + "°"
                document.getElementById("idOutTempCol5").value = previsao.forecast[5].max + "° - " + previsao.forecast[5].min + "°"
                document.getElementById("idOutTempCol6").value = previsao.forecast[6].max + "° - " + previsao.forecast[6].min + "°"
            }
        </script>
    </body>
</html>